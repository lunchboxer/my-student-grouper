import{t as J,a as R,d as ke}from"../chunks/8wlBrkfp.js";import{q as be,t as we,w as He,x as pe,y as Pe,b as Fe,s as ue,h as F,B as Je,a as Be,S as h,a1 as Ve,c as Ue,r as Ae,d as ce,g as ae,F as Ye,e as Ce,f as Ie,p as Ge,a2 as de,K as Ne,a3 as Ee,a4 as Ke,a5 as xe,a6 as me,a7 as Ze,J as Qe,a8 as We,k as Xe,a9 as ge,aa as ze,A as je,v as et,ab as $e,ac as tt,ad as rt,ae as at,af as nt,ag as st,ah as ot,j as it,ai as lt,aj as Le,ak as ut,M as ct,al as Se,am as fe,a0 as $,_ as T,Z as G,N as dt,an as C,ao as ft,$ as E}from"../chunks/Djet042c.js";import{d as vt,h as _t,s as W}from"../chunks/Bd7NHhIe.js";import{i as oe}from"../chunks/Db69BxIs.js";let ye=!1;function Oe(){ye||(ye=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function ht(e){var t=He,r=pe;be(null),we(null);try{return e()}finally{be(t),we(r)}}function De(e,t,r,o=r){e.addEventListener(t,()=>ht(r));const n=e.__on_r;n?e.__on_r=()=>{n(),o(!0)}:e.__on_r=()=>o(!0),Oe()}function ne(e,t){return t}function pt(e,t,r,o){for(var n=[],f=t.length,v=0;v<f;v++)Ze(t[v].e,n,!0);var g=f>0&&n.length===0&&r!==null;if(g){var k=r.parentNode;Qe(k),k.append(r),o.clear(),K(e,t[0].prev,t[f-1].next)}We(n,()=>{for(var p=0;p<f;p++){var c=t[p];g||(o.delete(c.k),K(e,c.prev,c.next)),Xe(c.e,!g)}})}function ee(e,t,r,o,n,f=null){var v=e,g={flags:t,items:new Map,first:null},k=(t&$e)!==0;if(k){var p=e;v=F?ue(Je(p)):p.appendChild(Pe())}F&&Be();var c=null,N=!1,_=Ve(()=>{var m=r();return et(m)?m:m==null?[]:Ne(m)});Fe(()=>{var m=h(_),d=m.length;if(N&&d===0)return;N=d===0;let b=!1;if(F){var M=v.data===Ue;M!==(d===0)&&(v=Ae(),ue(v),ce(!1),b=!0)}if(F){for(var x=null,l,s=0;s<d;s++){if(ae.nodeType===8&&ae.data===Ye){v=ae,b=!0,ce(!1);break}var a=m[s],i=o(a,s);l=Re(ae,g,x,null,a,i,s,n,t,r),g.items.set(i,l),x=l}d>0&&ue(Ae())}F||mt(m,g,v,n,t,o,r),f!==null&&(d===0?c?Ce(c):c=Ie(()=>f(v)):c!==null&&Ge(c,()=>{c=null})),b&&ce(!0),h(_)}),F&&(v=ae)}function mt(e,t,r,o,n,f,v){var H,X,P,q;var g=(n&rt)!==0,k=(n&(ge|me))!==0,p=e.length,c=t.items,N=t.first,_=N,m,d=null,b,M=[],x=[],l,s,a,i;if(g)for(i=0;i<p;i+=1)l=e[i],s=f(l,i),a=c.get(s),a!==void 0&&((H=a.a)==null||H.measure(),(b??(b=new Set)).add(a));for(i=0;i<p;i+=1){if(l=e[i],s=f(l,i),a=c.get(s),a===void 0){var L=_?_.e.nodes_start:r;d=Re(L,t,d,d===null?t.first:d.next,l,s,i,o,n,v),c.set(s,d),M=[],x=[],_=d.next;continue}if(k&&gt(a,l,i,n),(a.e.f&de)!==0&&(Ce(a.e),g&&((X=a.a)==null||X.unfix(),(b??(b=new Set)).delete(a))),a!==_){if(m!==void 0&&m.has(a)){if(M.length<x.length){var S=x[0],I;d=S.prev;var te=M[0],u=M[M.length-1];for(I=0;I<M.length;I+=1)Me(M[I],S,r);for(I=0;I<x.length;I+=1)m.delete(x[I]);K(t,te.prev,u.next),K(t,d,te),K(t,u,S),_=S,d=u,i-=1,M=[],x=[]}else m.delete(a),Me(a,_,r),K(t,a.prev,a.next),K(t,a,d===null?t.first:d.next),K(t,d,a),d=a;continue}for(M=[],x=[];_!==null&&_.k!==s;)(_.e.f&de)===0&&(m??(m=new Set)).add(_),x.push(_),_=_.next;if(_===null)continue;a=_}M.push(a),d=a,_=a.next}if(_!==null||m!==void 0){for(var w=m===void 0?[]:Ne(m);_!==null;)(_.e.f&de)===0&&w.push(_),_=_.next;var A=w.length;if(A>0){var Z=(n&$e)!==0&&p===0?r:null;if(g){for(i=0;i<A;i+=1)(P=w[i].a)==null||P.measure();for(i=0;i<A;i+=1)(q=w[i].a)==null||q.fix()}pt(t,w,Z,c)}}g&&tt(()=>{var B;if(b!==void 0)for(a of b)(B=a.a)==null||B.apply()}),pe.first=t.first&&t.first.e,pe.last=d&&d.e}function gt(e,t,r,o){(o&ge)!==0&&Ee(e.v,t),(o&me)!==0?Ee(e.i,r):e.i=r}function Re(e,t,r,o,n,f,v,g,k,p){var c=(k&ge)!==0,N=(k&ze)===0,_=c?N?Ke(n):xe(n):n,m=(k&me)===0?v:xe(v),d={i:m,v:_,k:f,a:null,e:null,prev:r,next:o};try{return d.e=Ie(()=>g(e,_,m,p),F),d.e.prev=r&&r.e,d.e.next=o&&o.e,r===null?t.first=d:(r.next=d,r.e.next=d.e),o!==null&&(o.prev=d,o.e.prev=d.e),d}finally{}}function Me(e,t,r){for(var o=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,f=e.e.nodes_start;f!==o;){var v=je(f);n.before(f),f=v}}function K(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}const kt=Symbol("is custom element"),bt=Symbol("is html");function wt(e){if(F){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;Te(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var n=e.checked;Te(e,"checked",null),e.checked=n}}};e.__on_r=r,at(r),Oe()}}function Te(e,t,r,o){var n=At(e);F&&(n[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||n[t]!==(n[t]=r)&&(t==="loading"&&(e[nt]=r),e.removeAttribute(t))}function At(e){return e.__attributes??(e.__attributes={[kt]:e.nodeName.includes("-"),[bt]:e.namespaceURI===st})}function Et(e,t,r=t){var o=ot();De(e,"input",n=>{var f=n?e.defaultValue:e.value;if(f=ve(e)?_e(f):f,r(f),o&&f!==(f=t())){var v=e.selectionStart,g=e.selectionEnd;e.value=f??"",g!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(g,e.value.length))}}),(F&&e.defaultValue!==e.value||it(t)==null&&e.value)&&r(ve(e)?_e(e.value):e.value),lt(()=>{var n=t();ve(e)&&n===_e(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function ve(e){var t=e.type;return t==="number"||t==="range"}function _e(e){return e===""?null:+e}function qe(e,t,r){if(e.multiple)return St(e,t);for(var o of e.options){var n=se(o);if(ut(n,t)){o.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function xt(e,t){Le(()=>{var r=new MutationObserver(()=>{var o=e.__value;qe(e,o)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function he(e,t,r=t){var o=!0;De(e,"change",n=>{var f=n?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(f),se);else{var g=e.querySelector(f)??e.querySelector("option:not([disabled])");v=g&&se(g)}r(v)}),Le(()=>{var n=t();if(qe(e,n,o),o&&n===void 0){var f=e.querySelector(":checked");f!==null&&(n=se(f),r(n))}e.__value=n,o=!1}),xt(e)}function St(e,t){for(var r of e.options)r.selected=~t.indexOf(se(r))}function se(e){return"__value"in e?e.__value:e.value}function yt(e,t,r,o,n,f,v,g,k){t()&&(C(r,!0),C(o,[],!0),setTimeout(()=>{try{let p=JSON.parse(JSON.stringify(n)),c=[];const N=(l,s)=>p.filter(a=>a[`choice${s}`]===l),_=l=>{p=p.filter(s=>!l.includes(s.id))};let m=new Set;const d=l=>{for(const a of l)if(!m.has(a))return a;const s=f.filter(a=>!m.has(a));return s[Math.floor(Math.random()*s.length)]};let b={trio:0,duo:0};for(const l of f){if(m.has(l))continue;const s=N(l,1);for(;s.length>=3&&b.trio<v.trio;){const a=s.splice(0,3);c.push({animal:l,students:a}),_(a.map(i=>i.id)),b.trio++,m.add(l)}for(;s.length>=2&&b.duo<v.duo;){const a=s.splice(0,2);c.push({animal:l,students:a}),_(a.map(i=>i.id)),b.duo++,m.add(l)}}for(let l=0;l<c.length;l++){const s=c[l];if(s.students.length===2&&b.trio<v.trio){let a=!1,i=N(s.animal,1);if(i.length>0){const L=i[0];s.students.push(L),_([L.id]),b.duo--,b.trio++,a=!0}if(!a&&(i=N(s.animal,2),i.length>0)){const L=i[0];s.students.push(L),_([L.id]),b.duo--,b.trio++,a=!0}if(!a&&(i=N(s.animal,3),i.length>0)){const L=i[0];s.students.push(L),_([L.id]),b.duo--,b.trio++}}}const M=l=>{if(p.length<l)return!1;const s=p.slice(0,l),a={};for(let S=1;S<=3;S++)for(const I of f)N(I,S).filter(w=>s.some(A=>A.id===w.id)).forEach(()=>{a[I]=(a[I]||0)+1});let i=null,L=0;for(const[S,I]of Object.entries(a))I>L&&!m.has(S)&&(i=S,L=I);return i||(i=d(s.flatMap(S=>[S.choice1,S.choice2,S.choice3]))),c.push({animal:`Mixed (Best Match: ${i})`,students:s}),_(s.map(S=>S.id)),m.add(i),!0};for(;b.trio<v.trio&&p.length>=3&&M(3);)b.trio++;for(;b.duo<v.duo&&p.length>=2&&M(2);)b.duo++;let x=0;for(;x<p.length;){let l=!1;const s=p[x];for(const a of c)if(a.students.length===2){a.students.push(s),p.splice(x,1),l=!0;break}l||(console.error("Could not assign student:",s),C(g,"Error during final assignment. Please check inputs or algorithm logic."),x++)}if(c.length!==k||p.length>0)console.error("Final group count or unassigned students mismatch.",c,p),C(g,`Grouping failed to produce exactly ${k} groups with all students assigned. (${c.length} groups formed, ${p.length} students left). Check algorithm logic.`),C(o,[],!0);else{let l=0,s=0;for(const a of c)if(a.students.length===3)l++;else if(a.students.length===2)s++;else{C(g,`Error: Group with invalid size ${a.students.length} created.`),C(o,[],!0),C(r,!1);return}l!==v.trio||s!==v.duo?(C(g,`Error: Final group structure is incorrect (${l} trios, ${s} duos). Expected ${v.trio} trios, ${v.duo} duos.`),C(o,[],!0)):C(o,c,!0)}}catch(p){console.error("Error during grouping:",p),C(g,`An unexpected error occurred: ${p.message}`),C(o,[],!0)}finally{C(r,!1)}},50))}var Mt=J("<option> </option>"),Tt=J("<option> </option>"),Ct=J("<option> </option>"),It=J('<div class="student-card svelte-1okd8w3"><strong class="svelte-1okd8w3"> </strong> <input type="text" placeholder="Enter Name" class="svelte-1okd8w3"> <select class="svelte-1okd8w3"><option disabled>1st Choice</option><!></select> <select class="svelte-1okd8w3"><option disabled>2nd Choice</option><!></select> <select class="svelte-1okd8w3"><option disabled>3rd Choice</option><!></select></div>'),Nt=J('<p class="error svelte-1okd8w3"> </p>'),$t=J('<span class="svelte-1okd8w3"> </span>'),Lt=J('<li class="svelte-1okd8w3"> </li>'),Ot=J('<div class="group-card svelte-1okd8w3"><h3 class="svelte-1okd8w3"> <!></h3> <ul class="svelte-1okd8w3"></ul></div>'),Dt=J('<section class="results-section svelte-1okd8w3"><h2 class="svelte-1okd8w3">Generated Groups</h2> <div class="group-outputs svelte-1okd8w3"></div></section>'),Rt=J('<main class="container svelte-1okd8w3"><h1>Student Animal Preference Grouping</h1> <p></p> <section class="input-section svelte-1okd8w3"><h2 class="svelte-1okd8w3">Student Choices</h2> <div class="student-inputs svelte-1okd8w3"></div></section> <section class="controls svelte-1okd8w3"><button class="svelte-1okd8w3"><!></button> <!></section> <!></main>');function Jt(e,t){ct(t,!0);const r=16,o=6,n=["Lion","Tiger","Elephant","Monkey","Ibex","Zebra","Giraffe","Kangaroo","Penguin","Dolphin"],f={trio:4,duo:2},v=["Alice","Ariella","Charlie","Christine","Cici","Eddie","Grace","Howard","Jasper","Jerry D","Jerry P","Lisa WY","Lisa ZL","Milly","Miriel","Queenie"].sort(()=>Math.random()-.5);function g(u){const w=[...u].sort(()=>Math.random()-.5);return{choice1:w[0],choice2:w[1],choice3:w[2]}}let k=Se(Array(r).fill(null).map((u,w)=>{const A=g(n);return{id:w,name:v[w],choice1:A.choice1,choice2:A.choice2,choice3:A.choice3}})),p=fe(Se([])),c=fe(""),N=fe(!1);function _(){C(c,"");for(const u of k){if(!u.name.trim())return C(c,`Please enter a name for all students (Student ID ${u.id+1}).`),!1;if(!u.choice1||!u.choice2||!u.choice3)return C(c,`Student ${u.name} must make all 3 choices.`),!1;if(u.choice1===u.choice2||u.choice1===u.choice3||u.choice2===u.choice3)return C(c,`Student ${u.name} must select three *different* animals.`),!1}return!0}var m=Rt();_t(u=>{ft.title="Student Grouping App"});var d=$(T(m),2);d.textContent=`Enter student names and their 1st, 2nd, and 3rd choice for an animal.
        The system will create 6 groups (4 groups of 3, 2 groups of
        2) based on preferences.`;var b=$(d,2),M=$(T(b),2);ee(M,23,()=>k,u=>u.id,(u,w,A)=>{var Z=It(),H=T(Z),X=T(H);E(H);var P=$(H,2);wt(P);var q=$(P,2),B=T(q);B.value=B.__value="";var ie=$(B);ee(ie,17,()=>n,ne,(D,O)=>{var y=Mt(),Y={},re=T(y,!0);E(y),G(()=>{Y!==(Y=h(O))&&(y.value=(y.__value=h(O))??""),W(re,h(O))}),R(D,y)}),E(q);var z=$(q,2),j=T(z);j.value=j.__value="";var Q=$(j);ee(Q,17,()=>n,ne,(D,O)=>{var y=Tt(),Y={},re=T(y,!0);E(y),G(()=>{Y!==(Y=h(O))&&(y.value=(y.__value=h(O))??""),y.disabled=k[h(A)].choice1===h(O),W(re,h(O))}),R(D,y)}),E(z);var V=$(z,2),U=T(V);U.value=U.__value="";var le=$(U);ee(le,17,()=>n,ne,(D,O)=>{var y=Ct(),Y={},re=T(y,!0);E(y),G(()=>{Y!==(Y=h(O))&&(y.value=(y.__value=h(O))??""),y.disabled=k[h(A)].choice1===h(O)||k[h(A)].choice2===h(O),W(re,h(O))}),R(D,y)}),E(V),E(Z),G(()=>W(X,`Student ${h(A)+1}:`)),Et(P,()=>k[h(A)].name,D=>k[h(A)].name=D),he(q,()=>k[h(A)].choice1,D=>k[h(A)].choice1=D),he(z,()=>k[h(A)].choice2,D=>k[h(A)].choice2=D),he(V,()=>k[h(A)].choice3,D=>k[h(A)].choice3=D),R(u,Z)}),E(M),E(b);var x=$(b,2),l=T(x);l.__click=[yt,_,N,p,k,n,f,c,o];var s=T(l);{var a=u=>{var w=ke("Processing...");R(u,w)},i=u=>{var w=ke("Create Groups");R(u,w)};oe(s,u=>{h(N)?u(a):u(i,!1)})}E(l);var L=$(l,2);{var S=u=>{var w=Nt(),A=T(w,!0);E(w),G(()=>W(A,h(c))),R(u,w)};oe(L,u=>{h(c)&&u(S)})}E(x);var I=$(x,2);{var te=u=>{var w=Dt(),A=$(T(w),2);ee(A,21,()=>h(p),ne,(Z,H,X)=>{var P=Ot(),q=T(P),B=T(q);B.nodeValue=`Group ${X+1} `;var ie=$(B);{var z=Q=>{var V=$t(),U=T(V);E(V),G(()=>W(U,`(Focus: ${h(H).animal??""})`)),R(Q,V)};oe(ie,Q=>{h(H).animal&&Q(z)})}E(q);var j=$(q,2);ee(j,21,()=>h(H).students,ne,(Q,V)=>{var U=Lt(),le=T(U,!0);E(U),G(()=>W(le,h(V).name)),R(Q,U)}),E(j),E(P),R(Z,P)}),E(A),E(w),R(u,w)};oe(I,u=>{h(p).length>0&&u(te)})}E(m),G(()=>l.disabled=h(N)),R(e,m),dt()}vt(["click"]);export{Jt as component};
